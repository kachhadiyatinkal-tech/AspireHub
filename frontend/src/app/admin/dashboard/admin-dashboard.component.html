<div class="space-y-8 p-6 bg-gray-900 min-h-screen text-gray-200">

  <h1 class="text-3xl font-bold text-indigo-400">Admin Dashboard</h1>

  <!-- Dashboard Summary Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
    <!-- Total Students -->
    <div class="bg-gray-800 border border-gray-700 rounded-2xl shadow-lg p-6 flex flex-col items-center justify-center hover:scale-105 transition transform">
      <div class="text-indigo-300 text-xl font-semibold">Total Students</div>
      <div class="text-white text-3xl font-bold mt-2">{{ students.length }}</div>
    </div>

    <!-- Total Companies -->
    <div class="bg-gray-800 border border-gray-700 rounded-2xl shadow-lg p-6 flex flex-col items-center justify-center hover:scale-105 transition transform">
      <div class="text-indigo-300 text-xl font-semibold">Total Companies</div>
      <div class="text-white text-3xl font-bold mt-2">{{ companies.length }}</div>
    </div>

    <!-- Total Placements -->
    <div class="bg-gray-800 border border-gray-700 rounded-2xl shadow-lg p-6 flex flex-col items-center justify-center hover:scale-105 transition transform">
      <div class="text-indigo-300 text-xl font-semibold">Total Placements</div>
      <div class="text-white text-3xl font-bold mt-2">{{ placementReport.length }}</div>
    </div>
  </div>

  <!-- Error Message -->
  @if (error) {
    <div class="rounded-xl bg-red-900/30 border border-red-700 text-red-300 px-4 py-2 text-sm">
      {{ error }}
    </div>
  }

  <!-- Loading -->
  @if (loading) {
    <div class="rounded-xl border border-gray-700 bg-gray-800 p-6 text-center text-gray-400">
      Loading...
    </div>
  } @else {

    <!-- Manage Students -->
    <div class="rounded-2xl bg-gray-800 border border-gray-700 shadow-lg p-6">
      <h2 class="text-xl font-semibold text-indigo-300 mb-4">Manage Students</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm">
          <thead class="bg-gray-700 text-gray-300 uppercase text-xs tracking-wider">
            <tr>
              <th class="px-4 py-2 text-left">Name</th>
              <th class="px-4 py-2 text-left">Email</th>
              <th class="px-4 py-2 text-left">Branch</th>
              <th class="px-4 py-2 text-left">Placed</th>
            </tr>
          </thead>
          <tbody>
            @for (s of students; track s.email) {
              <tr class="border-b border-gray-700 hover:bg-gray-700 transition">
                <td class="px-4 py-2 text-gray-100">{{ s.name }}</td>
                <td class="px-4 py-2 text-gray-400">{{ s.email }}</td>
                <td class="px-4 py-2 text-gray-400">{{ s.branch || '—' }}</td>
                <td class="px-4 py-2">
                  @if (s.placed) {
                    <span class="rounded-full bg-green-600/30 px-3 py-1 text-xs font-medium text-green-200">Yes</span>
                  } @else {
                    <span class="rounded-full bg-gray-600/30 px-3 py-1 text-xs font-medium text-gray-400">No</span>
                  }
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
      @if (students.length === 0) {
        <p class="py-4 text-gray-400">No students.</p>
      }
    </div>

    <!-- Manage Companies -->
    <div class="rounded-2xl bg-gray-800 border border-gray-700 shadow-lg p-6">
      <h2 class="text-xl font-semibold text-indigo-300 mb-4">Manage Companies</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm">
          <thead class="bg-gray-700 text-gray-300 uppercase text-xs tracking-wider">
            <tr>
              <th class="px-4 py-2 text-left">Name</th>
              <th class="px-4 py-2 text-left">Email</th>
              <th class="px-4 py-2 text-left">Status</th>
              <th class="px-4 py-2 text-left">Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (c of companies; track c._id) {
              <tr class="border-b border-gray-700 hover:bg-gray-700 transition">
                <td class="px-4 py-2 text-gray-100">{{ c.name }}</td>
                <td class="px-4 py-2 text-gray-400">{{ c.email }}</td>
                <td class="px-4 py-2">
                  @if (c.isApproved) {
                    <span class="rounded-full bg-green-600/30 px-3 py-1 text-xs font-medium text-green-200">Approved</span>
                  } @else {
                    <span class="rounded-full bg-amber-600/30 px-3 py-1 text-xs font-medium text-amber-200">Pending</span>
                  }
                </td>
                <td class="px-4 py-2 flex gap-2">
                  @if (updatingCompanyId === c._id) {
                    <span class="text-gray-400 text-xs">Updating...</span>
                  } @else {
                    @if (c.isApproved) {
                      <button
                        type="button"
                        (click)="setApproval(c, false)"
                        class="rounded-lg bg-red-600 px-3 py-1 text-xs font-medium text-white hover:bg-red-700 transition"
                      >
                        Reject
                      </button>
                    } @else {
                      <button
                        type="button"
                        (click)="setApproval(c, true)"
                        class="rounded-lg bg-green-600 px-3 py-1 text-xs font-medium text-white hover:bg-green-700 transition"
                      >
                        Approve
                      </button>
                    }
                  }
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
      @if (companies.length === 0) {
        <p class="py-4 text-gray-400">No companies.</p>
      }
    </div>

    <!-- Placement Report -->
    <div class="rounded-2xl bg-gray-800 border border-gray-700 shadow-lg p-6">
      <h2 class="text-xl font-semibold text-indigo-300 mb-4">Placement Report</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm">
          <thead class="bg-gray-700 text-gray-300 uppercase text-xs tracking-wider">
            <tr>
              <th class="px-4 py-2 text-left">Name</th>
              <th class="px-4 py-2 text-left">Email</th>
              <th class="px-4 py-2 text-left">Branch</th>
              <th class="px-4 py-2 text-left">Company</th>
              <th class="px-4 py-2 text-left">Job Title</th>
            </tr>
          </thead>
          <tbody>
            @for (r of placementReport; track r.email) {
              <tr class="border-b border-gray-700 hover:bg-gray-700 transition">
                <td class="px-4 py-2 text-gray-100">{{ r.name }}</td>
                <td class="px-4 py-2 text-gray-400">{{ r.email }}</td>
                <td class="px-4 py-2 text-gray-400">{{ r.branch || '—' }}</td>
                <td class="px-4 py-2 text-gray-400">{{ r.companyName || '—' }}</td>
                <td class="px-4 py-2 text-gray-400">{{ r.jobTitle || '—' }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
      @if (placementReport.length === 0) {
        <p class="py-4 text-gray-400">No placed students.</p>
      }
    </div>

  }
</div>